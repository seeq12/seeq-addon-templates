#_exclude:
#    - ".git"
#    - "copier.yaml"
#    - "add_on_tool.yaml"
#    - "requirements.txt"
#    - "entrypoint.py"
#    - addon_example
#    - includes

_subdirectory: addon_example

#_jinja_extensions:
#    - jinja2_jsonschema.JsonSchemaExtension

_tasks:
    - command: cp -R {{ _copier_conf.src_path }}/_dev_tools ./

_message_before_copy: |

    ================================================================================================
    Welcome to the Seeq Add-on Template!

    This template generates a working example that can be easily deployed to the 
    Seeq Add-on Manager. Once generated you can modify it to fit your needs.

    An Add-on in the Add-on Manager is composed of ELEMENTS. There are four element types:
    `AddOnTool`, `Plugin`, `DataLabFunctions` and `FormulaPackage`. An Add-on must have at
    least one element, but it may have any combination of element types and any number of
    each element type. More information about element types can be found in the Seeq Knowledge Base.

    This command will start with general questions about the Add-on, followed by 
    questions for each element that you would like to generate.

    Let's get started...
    ================================================================================================

# questions

add_on_manager_prompts:
    type: str
    help: 1. The answers to the following prompts will be displayed in the Add-on Manager
    default: Press enter to continue

project_name:
    type: str
    help: Enter Add-on name
    placeholder: "(e.g.: My Addon Project)"
    validator: >-
        {% if not (project_name | regex_search('^[A-Za-z][A-Za-z0-9 _-]*$')) %}
        add-on name must start with a letter and cannot contain any symbols.
        {% endif %}

project_description:
    type: str
    help: Enter description of this Add-On
    placeholder: "(e.g. Gets signals from workbench and does simple math with them)"
    validator: >-
        {% if not project_description %}
        add-on description cannot be empty.
        {% endif %}

project_version:
    type: str
    help: Enter (semantic) version of this add-on
    placeholder: "(e.g.: 0.0.1)"
    validator: >-
        {% if not (project_version | regex_search('^(0|[0-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$')) %}
        add-on version must follow semantic versioning format.
        {% endif %}

project_icon:
    type: str
    help: Enter icon. This will be shown in the Add-on Manager. (see fontawesome.com/v4/icons) # TODO: I don't think this list is right
    default: fa-bullseye
    validator: >-
        {% if not project_icon %}
        icon cannot be empty
        {% endif %}

project_maintainer:
    type: str
    help: Enter Add-on maintainer
    placeholder: "(e.g.: Seeq Corporation, https://seeq.com)"
    validator: >-
        {% if not project_maintainer %}
        maintainer field cannot be empty.
        {% endif %}

project_license:
    type: str
    help: Choose a license. To skip, press Enter
    default: "No license"
    choices:
        - "Apache License 2.0"
        - "MIT License"
        - "GNU General Public License"
        - "3-clause BSD License"
        - "No license"
    validator: >-
        {% if not project_license %}
        Please choose at least one option
        {% endif %}

elements_to_include:
    type: str
    help: Choose element(s) to include in the Add-On
    choices:
        - AddOnTool
        - DataLabFunctions
        - Plugin
        - FormulaPackage
    multiselect: true
    validator: >-
        {% if not elements_to_include %}
        Please choose at least one option
        {% endif %}

element_prompts:
    type: str
    help: "\n\n\n 2. Next, the command will guide you through generating each element you have selected."
    default: Press enter to continue
    when: "{% if elements_to_include %}true{% endif %}"

---
# Add-on Tool element questions
!include add_on_tool.yaml
